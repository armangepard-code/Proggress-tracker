<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Streak Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    .card {
      background: #111827;
      padding: 24px 32px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      text-align: center;
      max-width: 320px;
    }

    h1 {
      margin-top: 0;
      font-size: 24px;
    }

    .streak-number {
      font-size: 64px;
      font-weight: bold;
      margin: 16px 0;
      color: #22c55e;
    }

    .info {
      font-size: 14px;
      color: #9ca3af;
      margin-bottom: 16px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #22c55e;
      color: #022c22;
      font-weight: 600;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.2s;
    }

    button:hover {
      background: #16a34a;
      box-shadow: 0 6px 16px rgba(22, 163, 74, 0.5);
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: none;
    }

    .secondary {
      margin-top: 10px;
      background: transparent;
      color: #9ca3af;
      border: 1px solid #4b5563;
      box-shadow: none;
    }

    .secondary:hover {
      background: #1f2933;
      color: #e5e7eb;
      box-shadow: none;
    }

    .date {
      font-size: 12px;
      color: #6b7280;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Streak Tracker</h1>
    <div class="streak-number" id="streak">0</div>
    <div class="info" id="info">Press the button to increase your streak.</div>
    <button id="streakButton">I did it today ✅</button>
    <button class="secondary" id="resetButton">Reset streak</button>
    <div class="date" id="lastDate"></div>
  </div>

  <script>
    const streakEl = document.getElementById('streak');
    const infoEl = document.getElementById('info');
    const lastDateEl = document.getElementById('lastDate');
    const streakButton = document.getElementById('streakButton');
    const resetButton = document.getElementById('resetButton');

    function getTodayDateString() {
      const d = new Date();
      // yyyy-mm-dd
      return d.getFullYear() + '-' + (d.getMonth() + 1).toString().padStart(2, '0') + '-' +
             d.getDate().toString().padStart(2, '0');
    }

    function loadStreak() {
      const savedStreak = parseInt(localStorage.getItem('streak') || '0', 10);
      const lastDate = localStorage.getItem('lastDate') || null;
      streakEl.textContent = savedStreak;

      if (lastDate) {
        lastDateEl.textContent = 'Last pressed: ' + lastDate;
      } else {
        lastDateEl.textContent = '';
      }

      if (savedStreak === 0) {
        infoEl.textContent = 'Press the button to start your streak.';
      } else {
        infoEl.textContent = 'Keep going! Don’t break the chain.';
      }
    }

    function incrementStreak() {
      const today = getTodayDateString();
      const lastDate = localStorage.getItem('lastDate');

      if (lastDate === today) {
        infoEl.textContent = 'You already pressed for today.';
        return;
      }

      let streak = parseInt(localStorage.getItem('streak') || '0', 10);
      const yesterday = new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yesterdayStr =
        yesterday.getFullYear() + '-' +
        (yesterday.getMonth() + 1).toString().padStart(2, '0') + '-' +
        yesterday.getDate().toString().padStart(2, '0');

      if (lastDate && lastDate !== today && lastDate !== yesterdayStr) {
        // streak broken
        streak = 0;
      }

      streak += 1;
      localStorage.setItem('streak', streak.toString());
      localStorage.setItem('lastDate', today);
      loadStreak();
    }

    function resetStreak() {
      localStorage.removeItem('streak');
      localStorage.removeItem('lastDate');
      loadStreak();
    }

    streakButton.addEventListener('click', incrementStreak);
    resetButton.addEventListener('click', resetStreak);

    // On first load
    loadStreak();
  </script>
</body>
</html>